language: node_js
sudo: required
services:
  - docker # will be started on Travis-CI Server

cache:
  directories:
    - node_modules # cache this dir to save time from installing dependancies next time when CI is fired

before_install: # commands executed before our tests are run
  - docker build -t tzetzo/react-app -f Dockerfile.dev .

script:
  # tests will be run for every github branch!
  - docker run -e CI=true tzetzo/react-app npm run test

# Deployment to Heroku after successful tests
deploy:
  provider: heroku
  api_key:
    secure: "fjgzgL5y0BQbP8Pu4TESsQ9U8aAC2UkX8RL4na2i7k9emexiOuWaAK18XelFmCMwqzRqDFygFTK2O7E5sMbvSj4E4lf6zL8EnUM15QxTMe2F4w4G5UImvD8ER+k6wu9bcGeATojRpbJ0KbECwsWYZNy1Ykzim06/hvJS7FYxQ3E8266LCNBJn84OMo7mEyr4oqjVcfACKhLUUGsSSnksWX8+YpCntp63ALlgMM2QbPLrcsNgxiWcoZ+9e0KTFWypVBDdW4SWLS64SWGDcyBMukn/KhowC3DeACV6S496kA7KRDEz9TfF1f9RH80AzzYn1y0R5agOLSv97/7rgVKhWRZhAM2xd5TIYZnIYbL3dGnMgQSm1VCNB2ZkWziTO5F3LK3dNAcbDQs0BKo3K8YKKaeO63UcJfMYEucN7A9Pd+fUE7kpAH4TRS6OmM27EppzY8nQtZi+tNxD8lfCa/uEcGMTNmJQwhX1jufWi6oQLVz3HEYOaTkr66KSlTfwwRFTLL1dxb4t/1USk3h6Vvic99jHtHwgrSHBP6lM5FFQlSsniKUzeULAzMiGrcQhFmFteDAxByU4GuZtJ/fC5nDrF06lOBHqaWtd+EuDGGGfCvjTQrmSUR1OuITho01Rlww07PzVLepLzZbfsmYa+IGNsyDWXlxLiu+TSQ9Am+tG4ig="
  # the name of the app in heroku
  app: tzetzo-docker-react
  on:
    # repo name in github
    # repo: tzetzo/docker-react
    branch: master
# Deployment to AWS ElasticBeanstalk after successful tests & only when Master Branch changed!
# deploy:
#     #edge: true #add this if you are getting a persistent missing bucket_name error with a failed build
#     provider: elasticbeanstalk
#     region: "us-west-2"
#     app: "docker-react"
#     env: "Docker-react-env"
#     bucket_name: "elasticbeanstalk-us-west-2-306476627547"
#     bucket_path: "docker-react"
#     on:
#         branch: master
#     # The following keys are from AWS IAM & their values are saved inside https://travis-ci.org - Settings - Environment Variables
#     access_key_id: $AWS_ACCESS_KEY
#     secret_access_key: $AWS_SECRET_KEY
